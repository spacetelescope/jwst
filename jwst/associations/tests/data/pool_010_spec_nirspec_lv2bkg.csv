# Pool.Spectrum.NIRSpec
#
# Examples of NIRSpec spectroscopy
#
# OBS_NUM and AC_CANDIDATE must be computed and inserted. Other columns which also incorporate these values are not modified.
#
FILENAME|OBS_ID|PROGRAM|OBS_NUM|VISIT|VISIT_ID|VISITGRP|VISITYPE|SEQ_ID|ACT_ID|EXPOSURE|EXP_TYPE|NEXPOSUR|EXPCOUNT|INSTRUME|DETECTOR|CHANNEL|TARGETID|TARGPROP|TARGNAME|TARGTYPE|TEMPLATE|PNTGTYPE|PNTG_SEQ|TARGORDN|EXPSPCIN|DITHPTIN|MOSTILNO|MODULE|FILTER|PUPIL|DITHERID|PATTTYPE|PATTSTRT|NUMDTHPT|PATTSIZE|SUBPXPNS|PATT_NUM|SUBPXNUM|SUBPIXEL|APERNAME|SDP_VER|SUBARRAY|GRATING|FXD_SLIT|BAND|ASN_CANDIDATE|BKGDTARG|IS_IMPRT
#
# ########
# Proposal 84500
# Observations: 3
# Mode: Fixed Slit, MOS, IFU
#
# Initialize ACID. This is done with a dummy exposure that will not match any association
set acid|OBS_ID|PROGRAM|OBS_NUM|VISIT|VISIT_ID|VISITGRP|WFSVISIT|SEQ_ID|ACT_ID|EXPOSURE|EXP_TYPE|NEXPOSUR|EXPCOUNT|INSTRUME|DETECTOR|CHANNEL|TARGETID|TARGPROP|TARGNAME|TARGTYPE|TEMPLATE|PNTGTYPE|PNTG_SEQ|TARGORDN|EXPSPCIN|DITHPTIN|MOSTILNO|MODULE|FILTER|PUPIL|DITHERID|PATTTYPE|PATTSTRT|NUMDTHPT|PATTSIZE|SUBPXPNS|PATT_NUM|SUBPXNUM|SUBPIXEL|APERNAME|SDP_VER|SUBARRAY|GRATING|FXD_SLIT|BAND|@!next(acid)|F|N
#
# There are two AC's defined. Set ACID to reflect this as a last dummy exposure
#
# Background exposures: Fixed Slit
@!fmt_fname(next(expnum))|V99009003001P0000000002102|99009|@!next(obsnum)|1|99009003001|2|prime_targeted_fixed|1|2|1|NRS_FIXEDSLIT|NULL|NULL|NIRSPEC|NRS1|NULL|3|M-33|NULL|FIXED|NIRSpec Fixed Slit Spectroscopy|SCIENCE|2|1|1|1|1|NULL|F100LP|NULL|NULL|NULL|NULL|0|NULL|0|NULL|NULL|NULL|NRS_FULL_MSACNTR|2015_1|S200A2|G140M|S200A2|NULL|@!fmt_cand([(obsnum.value, 'OBSERVATION'), (acid.value, 'BACKGROUND')])|T|N
@!fmt_fname(next(expnum))|V99009003001P0000000002102|99009|@!obsnum.value|1|99009003001|2|prime_targeted_fixed|1|2|1|NRS_FIXEDSLIT|NULL|NULL|NIRSPEC|NRS2|NULL|3|M-33|NULL|FIXED|NIRSpec Fixed Slit Spectroscopy|SCIENCE|2|1|1|1|1|NULL|F100LP|NULL|NULL|NULL|NULL|0|NULL|0|NULL|NULL|NULL|NRS_FULL_MSACNTR|2015_1|S200A2|G140M|S200A2|NULL|@!fmt_cand([(obsnum.value, 'OBSERVATION'), (acid.value, 'BACKGROUND')])|T|N
#
# Background exposures: IFU
@!fmt_fname(next(expnum))|V99009007001P0000000002102|99009|@!next(obsnum)|1|99009007001|2|prime_targeted_fixed|1|2|1|NRS_IFU|NULL|NULL|NIRSPEC|NRS1|NULL|4|M-33|NULL|FIXED|NIRSpec IFU Spectroscopy|SCIENCE|2|1|1|1|1|NULL|F170LP|NULL|NULL|NULL|NULL|0|NULL|0|NULL|NULL|NULL|NRS_FULL_MSACNTR|2015_1|FULL|G235H|NULL|NULL|@!fmt_cand([(obsnum.value, 'OBSERVATION'), (acid.value + 1, 'BACKGROUND')])|T|N
@!fmt_fname(next(expnum))|V99009007001P0000000002102|99009|@!obsnum.value|1|99009007001|2|prime_targeted_fixed|1|2|1|NRS_IFU|NULL|NULL|NIRSPEC|NRS2|NULL|4|M-33|NULL|FIXED|NIRSpec IFU Spectroscopy|SCIENCE|2|1|1|1|1|NULL|F170LP|NULL|NULL|NULL|NULL|0|NULL|0|NULL|NULL|NULL|NRS_FULL_MSACNTR|2015_1|FULL|G235H|NULL|NULL|@!fmt_cand([(obsnum.value, 'OBSERVATION'), (acid.value + 1, 'BACKGROUND')])|T|N
#
# Mode: Fixed Slit
@!fmt_fname(next(expnum))|V99009003001P0000000002102|99009|@!next(obsnum)|1|99009003001|2|prime_targeted_fixed|1|2|1|NRS_FIXEDSLIT|NULL|NULL|NIRSPEC|NRS1|NULL|1|M-33|NULL|FIXED|NIRSpec Fixed Slit Spectroscopy|SCIENCE|2|1|1|1|1|NULL|F100LP|NULL|NULL|NULL|NULL|0|NULL|0|NULL|NULL|NULL|NRS_FULL_MSACNTR|2015_1|S200A2|G140M|S200A2|NULL|@!fmt_cand([(obsnum.value, 'OBSERVATION'), (acid.value, 'BACKGROUND')])|F|N
@!fmt_fname(next(expnum))|V99009003001P0000000002102|99009|@!obsnum.value|1|99009003001|2|prime_targeted_fixed|1|2|1|NRS_FIXEDSLIT|NULL|NULL|NIRSPEC|NRS2|NULL|1|M-33|NULL|FIXED|NIRSpec Fixed Slit Spectroscopy|SCIENCE|2|1|1|1|1|NULL|F100LP|NULL|NULL|NULL|NULL|0|NULL|0|NULL|NULL|NULL|NRS_FULL_MSACNTR|2015_1|S200A2|G140M|S200A2|NULL|@!fmt_cand([(obsnum.value, 'OBSERVATION'), (acid.value, 'BACKGROUND')])|F|N
@!fmt_fname(next(expnum))|V99009003001P0000000002102|99009|@!obsnum.value|1|99009003001|2|prime_targeted_fixed|1|2|1|NRS_TACONFIRM|NULL|NULL|NIRSPEC|NRS2|NULL|1|M-33|NULL|FIXED|NIRSpec Fixed Slit Spectroscopy|SCIENCE|2|1|1|1|1|NULL|F100LP|NULL|NULL|NULL|NULL|0|NULL|0|NULL|NULL|NULL|NRS_FULL_MSACNTR|2015_1|S200A2|G140M|S200A2|NULL|@!fmt_cand([(obsnum.value, 'OBSERVATION'), (acid.value, 'BACKGROUND')])|F|N
@!fmt_fname(next(expnum))|V99009003001P0000000002102|99009|@!obsnum.value|1|99009003001|2|prime_targeted_fixed|1|2|1|NRS_CONFIRM|NULL|NULL|NIRSPEC|NRS2|NULL|1|M-33|NULL|FIXED|NIRSpec Fixed Slit Spectroscopy|SCIENCE|2|1|1|1|1|NULL|F100LP|NULL|NULL|NULL|NULL|0|NULL|0|NULL|NULL|NULL|NRS_FULL_MSACNTR|2015_1|S200A2|G140M|S200A2|NULL|@!fmt_cand([(obsnum.value, 'OBSERVATION'), (acid.value, 'BACKGROUND')])|F|N
@!fmt_fname(next(expnum))|V99009003001P0000000002102|99009|@!obsnum.value|1|99009003001|2|prime_targeted_fixed|1|2|1|NRS_TASLIT|NULL|NULL|NIRSPEC|NRS2|NULL|1|M-33|NULL|FIXED|NIRSpec Fixed Slit Spectroscopy|SCIENCE|2|1|1|1|1|NULL|F100LP|NULL|NULL|NULL|NULL|0|NULL|0|NULL|NULL|NULL|NRS_FULL_MSACNTR|2015_1|S200A2|G140M|S200A2|NULL|@!fmt_cand([(obsnum.value, 'OBSERVATION'), (acid.value, 'BACKGROUND')])|F|N
@!fmt_fname(next(expnum))|V99009003001P0000000002102|99009|@!obsnum.value|1|99009003001|2|prime_targeted_fixed|1|2|1|NRS_TACQ|NULL|NULL|NIRSPEC|NRS2|NULL|1|M-33|NULL|FIXED|NIRSpec Fixed Slit Spectroscopy|SCIENCE|2|1|1|1|1|NULL|F100LP|NULL|NULL|NULL|NULL|0|NULL|0|NULL|NULL|NULL|NRS_FULL_MSACNTR|2015_1|S200A2|G140M|S200A2|NULL|@!fmt_cand([(obsnum.value, 'OBSERVATION'), (acid.value, 'BACKGROUND')])|F|N
@!fmt_fname(next(expnum))|V99009003001P0000000002102|99009|@!obsnum.value|1|99009003001|2|prime_targeted_fixed|1|2|1|NRS_AUTOWAVE|NULL|NULL|NIRSPEC|NRS2|NULL|1|M-33|NULL|FIXED|NIRSpec Fixed Slit Spectroscopy|SCIENCE|2|1|1|1|1|NULL|F100LP|NULL|NULL|NULL|NULL|0|NULL|0|NULL|NULL|NULL|NRS_FULL_MSACNTR|2015_1|S200A2|G140M|S200A2|NULL|@!fmt_cand([(obsnum.value, 'OBSERVATION'), (acid.value, 'BACKGROUND')])|F|N
#
# Mode: IFU
@!fmt_fname(next(expnum))|V99009007001P0000000002102|99009|@!next(obsnum)|1|99009007001|2|prime_targeted_fixed|1|2|1|NRS_IFU|NULL|NULL|NIRSPEC|NRS1|NULL|2|M-33|NULL|FIXED|NIRSpec IFU Spectroscopy|SCIENCE|2|1|1|1|1|NULL|F170LP|NULL|NULL|NULL|NULL|0|NULL|0|NULL|NULL|NULL|NRS_FULL_MSACNTR|2015_1|FULL|G235H|NULL|NULL|@!fmt_cand([(obsnum.value, 'OBSERVATION'), (acid.value + 1, 'BACKGROUND')])|F|N
@!fmt_fname(next(expnum))|V99009007001P0000000002102|99009|@!obsnum.value|1|99009007001|2|prime_targeted_fixed|1|2|1|NRS_IFU|NULL|NULL|NIRSPEC|NRS2|NULL|2|M-33|NULL|FIXED|NIRSpec IFU Spectroscopy|SCIENCE|2|1|1|1|1|NULL|F170LP|NULL|NULL|NULL|NULL|0|NULL|0|NULL|NULL|NULL|NRS_FULL_MSACNTR|2015_1|FULL|G235H|NULL|NULL|@!fmt_cand([(obsnum.value, 'OBSERVATION'), (acid.value + 1, 'BACKGROUND')])|F|N
@!fmt_fname(next(expnum))|V99009007001P0000000002102|99009|@!obsnum.value|1|99009007001|2|prime_targeted_fixed|1|2|1|NRS_TASLIT|NULL|NULL|NIRSPEC|NRS2|NULL|2|M-33|NULL|FIXED|NIRSpec IFU Spectroscopy|SCIENCE|2|1|1|1|1|NULL|F170LP|NULL|NULL|NULL|NULL|0|NULL|0|NULL|NULL|NULL|NRS_FULL_MSACNTR|2015_1|FULL|G235H|NULL|NULL|@!fmt_cand([(obsnum.value, 'OBSERVATION'), (acid.value + 1, 'BACKGROUND')])|F|N
@!fmt_fname(next(expnum))|V99009007001P0000000002102|99009|@!obsnum.value|1|99009007001|2|prime_targeted_fixed|1|2|1|NRS_TACQ|NULL|NULL|NIRSPEC|NRS2|NULL|2|M-33|NULL|FIXED|NIRSpec IFU Spectroscopy|SCIENCE|2|1|1|1|1|NULL|F170LP|NULL|NULL|NULL|NULL|0|NULL|0|NULL|NULL|NULL|NRS_FULL_MSACNTR|2015_1|FULL|G235H|NULL|NULL|@!fmt_cand([(obsnum.value, 'OBSERVATION'), (acid.value + 1, 'BACKGROUND')])|F|N
@!fmt_fname(next(expnum))|V99009007001P0000000002102|99009|@!obsnum.value|1|99009007001|2|prime_targeted_fixed|1|2|1|NRS_TACONFIRM|NULL|NULL|NIRSPEC|NRS2|NULL|2|M-33|NULL|FIXED|NIRSpec IFU Spectroscopy|SCIENCE|2|1|1|1|1|NULL|F170LP|NULL|NULL|NULL|NULL|0|NULL|0|NULL|NULL|NULL|NRS_FULL_MSACNTR|2015_1|FULL|G235H|NULL|NULL|@!fmt_cand([(obsnum.value, 'OBSERVATION'), (acid.value + 1, 'BACKGROUND')])|F|N
@!fmt_fname(next(expnum))|V99009007001P0000000002102|99009|@!obsnum.value|1|99009007001|2|prime_targeted_fixed|1|2|1|NRS_CONFIRM|NULL|NULL|NIRSPEC|NRS2|NULL|2|M-33|NULL|FIXED|NIRSpec IFU Spectroscopy|SCIENCE|2|1|1|1|1|NULL|F170LP|NULL|NULL|NULL|NULL|0|NULL|0|NULL|NULL|NULL|NRS_FULL_MSACNTR|2015_1|FULL|G235H|NULL|NULL|@!fmt_cand([(obsnum.value, 'OBSERVATION'), (acid.value + 1, 'BACKGROUND')])|F|N
@!fmt_fname(next(expnum))|V99009007001P0000000002102|99009|@!obsnum.value|1|99009007001|2|prime_targeted_fixed|1|2|1|NRS_AUTOWAVE|NULL|NULL|NIRSPEC|NRS2|NULL|2|M-33|NULL|FIXED|NIRSpec IFU Spectroscopy|SCIENCE|2|1|1|1|1|NULL|F170LP|NULL|NULL|NULL|NULL|0|NULL|0|NULL|NULL|NULL|NRS_FULL_MSACNTR|2015_1|FULL|G235H|NULL|NULL|@!fmt_cand([(obsnum.value, 'OBSERVATION'), (acid.value + 1, 'BACKGROUND')])|F|N
#
# Set ACID to how many have been used.
set acid|OBS_ID|PROGRAM|OBS_NUM|VISIT|VISIT_ID|VISITGRP|prime_targeted_fixed|SEQ_ID|ACT_ID|EXPOSURE|EXP_TYPE|NEXPOSUR|EXPCOUNT|INSTRUME|DETECTOR|CHANNEL|TARGETID|TARGPROP|TARGNAME|TARGTYPE|TEMPLATE|PNTGTYPE|PNTG_SEQ|TARGORDN|EXPSPCIN|DITHPTIN|MOSTILNO|MODULE|FILTER|PUPIL|DITHERID|PATTTYPE|PATTSTRT|NUMDTHPT|PATTSIZE|SUBPXPNS|PATT_NUM|SUBPXNUM|SUBPIXEL|APERNAME|SDP_VER|SUBARRAY|GRATING|FXD_SLIT|BAND|@!acid.set(acid.value + 1)|F|N
